<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> 
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title><%= full_title(yield(:title)) %></title>
	
	<meta name="description" content="">

	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="style/styleh5bp.css">

	<%= stylesheet_link_tag    "application", media: "all" %>
	<%= javascript_include_tag "application" %>
	<%= csrf_meta_tags %>
</head>

<body>

	<!-- ///////////////////////////////////ACCOUNT////////////////////////////////////////// -->
	<%= render 'layouts/account' %>
	<!-- ///////////////////////////////////SIDEBAR1//////////////////////////////////////////-->
	<div class="sidebar sidebar1" >
		
		<div id="home" class="head">
			<%= image_tag 'img/head-logo.png', alt: "One Spark Logo" %>
		</div>
		
		<div id="projectHead" class="head">
			<h3><%= @project.title %></h3>
		</div>
		

		<div class="scroll-pane jspScrollable tools">
			<div class="tool add" >
					<%= link_to 'Add Tool' %></div>
				<div class="tool overview" >
					<%= link_to 'Overview' %></div>
				<div class="tool coworkers" >
					<%= link_to 'Coworkers', project_coworkers_path(@project)%></div>
				<div class="tool files" >
					<%= link_to 'Files' %></div>
				<div class="tool milestones active" >
					<%= link_to 'Milestones', project_milestones_path(@project) %></div>
				<div class="tool documents" >
					<%= link_to 'Documents' %></div>
				<div class="tool calendar" >
					<%= link_to 'Calendar' %></div>
				<div class="tool dialogs" >
					<%= link_to 'Dialogs' %></div>
				<div class="tool settings" >
					<%= link_to 'Settings' %></div>
				<div class="tool trash" >
					<%= link_to 'Trash' %></div>
		</div>
	</div>

	<!-- ///////////////////////////////////CONTENT//////////////////////////////////////////-->
	<%= yield %>


<script type="text/javascript">

var scroll = $('.scroll-pane');
var content = $('.content');

var headHeight = $('.head').height();
var sidebarWidth = ($('.sidebar').width())*2;

console.log("Breite der Tools/ Folder: " + sidebarWidth);
// console.log("Größe Header = "+headHeight);
// console.log("Größe Footer = "+bottomHeight);

var toolheight = function(){
	var height = (($(window).height()) - headHeight).toString();
	console.log("toolHeight: "+height);
	scroll.css("height", height + "px");
};
var contentWidth = function(){
	var width = (($(window).width()) - sidebarWidth).toString();
	console.log("contentWidth: "+width + "windowWidth: "+ $(window).width().toString());
	content.css("width", width + "px");
	content.css("float", "left");
};

var headerSpacing = function(selector){
	var s1 = $(selector);
	var s1margin = (0 - s1.height() / 2 + 2).toString();
	console.log(s1margin);
	s1.css('margin-top',s1margin+'px');
}

 $(window).ready(
 	toolheight(), 
 	contentWidth(), 
 	headerSpacing('#projectHead h3'), 
 	headerSpacing('#toolHead h3'),
 	headerSpacing('#contentHead h3')
 );


$(window).resize(function(){
	toolheight();
});
// $(window).resize(function(){
// 	contentWidth();
// });



// Scrollbar-Replacement
$(function()
{
	$('.scroll-pane').each(
		function()
		{
			$(this).jScrollPane(
				{	
					showArrows: $(this).is('.arrow')
				}
			);
			var api = $(this).data('jsp');
			var throttleTimeout;
			$(window).bind(
				'resize',
				function()
				{
					if ($.browser.msie) {
						// IE fires multiple resize events while you are dragging the browser window which
						// causes it to crash if you try to update the scrollpane on every one. So we need
						// to throttle it to fire a maximum of once every 50 milliseconds...
						if (!throttleTimeout) {
							throttleTimeout = setTimeout(
								function()
								{
									api.reinitialise();
									throttleTimeout = null;
								},
								50
							);
						}
					} else { 
						api.reinitialise();
					}
				}
			);
		}
	)

});
$(function()
{
	$('.scroll-pane').jScrollPane(
		{
			hijackInternalLinks: true,
			animateScroll: false
		}
	);
});
</script>
</body>
</html>
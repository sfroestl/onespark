<%= provide(:title, 'All Topics') %>
<!-- ///////////////////////////////////SIDEBAR2//////////////////////////////////////////-->
<div class="sidebar sidebar2">
  <div id = "toolHead" class="head">
    <h3>Topics</h3>
  </div>

  <div class="scroll-pane jspScrollable tools">
    
        <%= link_to new_project_topic_path(@project) do %>
          <div class="tool add" >Add Topic</div>
        <% end %>

      <%= link_to project_topics_path(@project) do %>
        <div class="tool active">All Topics</div>
      <% end %>

      <% for topic in @topics %>
        <%= link_to project_topic_path(@project, topic) do %>
          <div class="tool"><%= topic.title %></div> 
        <% end %>
      <% end %>
  </div>
</div>


<!-- ///////////////////////////////////CONTENT//////////////////////////////////////////-->
<div class="content">
  <div id = "contentHead" class="head">
    <h3><a href="#add" class="tk-ff-meta-serif-web-pro">Comments</a></h3>
  </div>

  <div class="scroll-pane jspScrollable">  <!-- scroll-pane jspScrollable -->
    <%= link_to new_project_topic_path(@project) do %>
      <div class="task tool" id="add">
        <p>Add Comment</p>
      </div>
    <% end %>

    <% for topic in @topics do %>
      <div class="task">
        <h1>
          <%= topic.title %>
        </h1>
        <p>desc: <%= topic.desc %></p>
        <p>created: <%= format_date_long topic.created_at %></p>
        <p>created by: <%= topic.creator.username %></p>
        <%= link_to "Edit", edit_project_topic_path(@project, topic) %>
        <%= link_to "Delete", project_topic_path(@project, topic), :confirm => 'Are you sure?', :method => :delete %> 
        <%= link_to 'Complete', '#' %>

        <p>
          <% if topic.comments.empty? %>
            <p>No comments to display.</p>
          <% else %>          
            <h2><%= link_to pluralize(topic.comments.size, 'comment'), topic_comments_path(topic) %></h2>
            <% for comment in topic.comments %>
            <p>Commented by <%= comment.user.username %> at <%= format_date_long(comment.created_at) %></p>
            <p>  <%= comment.content %></p>
            <% end %>
          <% end %>
          </p>
          <p>
          Add Comment
        
          <%= form_for [topic, topic.comments.build] do |f| %>
            <%= f.text_field :content %>
            <%= f.hidden_field :commentable_name, value: 'topic' %>
            <%= f.hidden_field :redirect_url, value: request.fullpath %>
            <%= f.submit %>
          <% end %>
        </p>
      </div>
    <% end %>

    
  </div>
</div>